___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "concord",
  "version": 1,
  "securityGroups": [],
  "displayName": "Concord CMP",
  "categories": [
    "TAG_MANAGEMENT",
    "PERSONALIZATION"
  ],
  "brand": {
    "displayName": "Concord Technologies Inc.",
    "id": "Concord",
    "thumbnail": "data:image/png;base64,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"
  },
  "description": "Concord’s powerful easy-to-use data privacy platform helps you build trust with people, drive company growth, and comply with the latest data privacy regulations, including GDPR, CCPA/CPRA, LGPD, and more. Learn more at https://concord.tech.",
  "containerContexts": [
    "WEB"
  ]
}


___VENDOR_DETAILS___

{
  "vendorName": "Concord",
  "description": "Concord’s powerful easy-to-use data privacy platform helps you build trust with people, drive company growth, and comply with the latest data privacy regulations, including GDPR, CCPA/CPRA, LGPD, and more. Learn more at https://concord.tech.",
  "homepageUrl": "https://concord.tech",
  "termsAndConditionsUrl": "https://www.concord.tech/legal/saas-agreement",
  "freeTrial": "14-day free trial",
  "freeTier": "Yes",
  "countries": "No limitations",
  "languages": [
    "bg",
    "bn",
    "cs",
    "da",
    "de",
    "el",
    "en",
    "es",
    "et",
    "fa",
    "fi",
    "fr",
    "hi",
    "hr",
    "hu",
    "id",
    "it",
    "ja",
    "ko",
    "lt",
    "lv",
    "mt",
    "nb",
    "nl",
    "pa",
    "pl",
    "pt",
    "ro",
    "ru",
    "sk",
    "sl",
    "sv",
    "th",
    "tr",
    "vi",
    "uk",
    "zh",
    "zh_hk",
  ],
  "platforms": [
    "WEB",
    "IOS",
    "ANDROID",
    "AMP"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "notSetText": "Please enter the \u0027Project ID\u0027 from the Projects page on Concord Admin console, e.g. \u0027XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\u0027",
    "help": "First, sign up for a https://concord.tech account, then copy your \u0027Project ID\u0027 from the Projects page on Concord Admin console.",
    "valueValidators": [
      {
        "args": [
          "^(\\{){0,1}[0-9a-fA-F]{8}\\-[0-9a-fA-F]{4}\\-[0-9a-fA-F]{4}\\-[0-9a-fA-F]{4}\\-[0-9a-fA-F]{12}(\\}){0,1}$"
        ],
        "type": "REGEX"
      },
      {
        "type": "NON_EMPTY"
      }
    ],
    "displayName": "Concord Project ID",
    "simpleValueType": true,
    "name": "projectId",
    "type": "TEXT",
    "valueHint": "Your Concord Project ID"
  },
  {
    "type": "CHECKBOX",
    "name": "injectConcordScript",
    "checkboxText": "Inject Concord Script",
    "simpleValueType": true
  },
  {
    "type": "TEXT",
    "name": "concordDomain",
    "simpleValueType": true,
    "defaultValue": "api.concord.tech",
    "displayName": "Concord API Domain"
  },
  {
    "name": "Consent Mode Settings",
    "groupStyle": "ZIPPY_CLOSED",
    "type": "GROUP",
    "subParams": [
      {
        "valueValidators": [
          {
            "args": [
              1
            ],
            "type": "TABLE_ROW_COUNT"
          }
        ],
        "displayName": "Default Settings",
        "name": "defaultSettings",
        "paramTableColumns": [
          {
            "param": {
              "displayName": "Region (leave blank to apply to all regions)",
              "simpleValueType": true,
              "name": "region",
              "type": "TEXT"
            },
            "isUnique": true
          },
          {
            "param": {
              "macrosInSelect": true,
              "selectItems": [
                {
                  "displayValue": "Granted",
                  "value": "granted"
                },
                {
                  "displayValue": "Denied",
                  "value": "denied"
                }
              ],
              "displayName": "ad_storage",
              "defaultValue": "denied",
              "simpleValueType": true,
              "name": "adStorage",
              "type": "SELECT"
            },
            "isUnique": false
          },
          {
            "param": {
              "macrosInSelect": true,
              "selectItems": [
                {
                  "displayValue": "Granted",
                  "value": "granted"
                },
                {
                  "displayValue": "Denied",
                  "value": "denied"
                }
              ],
              "displayName": "analytics_storage",
              "defaultValue": "denied",
              "simpleValueType": true,
              "name": "analyticsStorage",
              "type": "SELECT"
            },
            "isUnique": false
          },
          {
            "param": {
              "macrosInSelect": true,
              "selectItems": [
                {
                  "displayValue": "Granted",
                  "value": "granted"
                },
                {
                  "displayValue": "Denied",
                  "value": "denied"
                }
              ],
              "displayName": "functionality_storage",
              "defaultValue": "denied",
              "simpleValueType": true,
              "name": "functionalityStorage",
              "type": "SELECT"
            },
            "isUnique": false
          },
          {
            "param": {
              "macrosInSelect": true,
              "selectItems": [
                {
                  "displayValue": "Granted",
                  "value": "granted"
                },
                {
                  "displayValue": "Denied",
                  "value": "denied"
                }
              ],
              "displayName": "personalization_storage",
              "defaultValue": "denied",
              "simpleValueType": true,
              "name": "personalizationStorage",
              "type": "SELECT"
            },
            "isUnique": false
          },
          {
            "param": {
              "macrosInSelect": true,
              "selectItems": [
                {
                  "displayValue": "Granted",
                  "value": "granted"
                },
                {
                  "displayValue": "Denied",
                  "value": "denied"
                }
              ],
              "displayName": "security_storage",
              "defaultValue": "denied",
              "simpleValueType": true,
              "name": "securityStorage",
              "type": "SELECT"
            },
            "isUnique": false
          },
          {
            "param": {
              "macrosInSelect": true,
              "selectItems": [
                {
                  "displayValue": "Granted",
                  "value": "granted"
                },
                {
                  "displayValue": "Denied",
                  "value": "denied"
                }
              ],
              "displayName": "ad_user_data",
              "defaultValue": "denied",
              "simpleValueType": true,
              "name": "adUserData",
              "type": "SELECT"
            },
            "isUnique": false
          },
          {
            "param": {
              "macrosInSelect": true,
              "selectItems": [
                {
                  "displayValue": "Granted",
                  "value": "granted"
                },
                {
                  "displayValue": "Denied",
                  "value": "denied"
                }
              ],
              "displayName": "ad_personalization",
              "defaultValue": "denied",
              "simpleValueType": true,
              "name": "adPersonalization",
              "type": "SELECT"
            },
            "isUnique": false
          }
        ],
        "type": "PARAM_TABLE"
      },
      {
        "displayName": "Additional Settings",
        "name": "settingsGroup",
        "groupStyle": "ZIPPY_OPEN",
        "type": "GROUP",
        "subParams": [
          {
            "simpleValueType": true,
            "name": "adsDataRedaction",
            "checkboxText": "Redact Ads Data",
            "type": "CHECKBOX"
          },
          {
            "help": "Allow passing ad click information through URL parameters across pages using URL passthrough.",
            "simpleValueType": true,
            "name": "url_passthrough",
            "checkboxText": "Pass through URL parameters",
            "type": "CHECKBOX"
          },
          {
            "help": "Time to wait for update command before firing consent-aware tags",
            "displayName": "Wait For Update",
            "defaultValue": 500,
            "simpleValueType": true,
            "name": "waitForUpdate",
            "valueUnit": "ms",
            "type": "TEXT"
          }
        ]
      }
    ],
    "displayName": "Default Consent Settings"
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

const log = require('logToConsole');
const setDefaultConsentState = require('setDefaultConsentState');
const updateConsentState = require('updateConsentState');
const queryPermission = require('queryPermission');
const getCookieValues = require('getCookieValues');
const gtagSet = require('gtagSet');
const JSON = require('JSON');
const Object = require('Object');
const injectScript = require('injectScript');
const concordProjectId = data.projectId;
const injectConcordScript = data.injectConcordScript;
const concordKey = 'concord-allow-state-' + concordProjectId;
const concordDomain = data.concordDomain;

const splitInput = (input) => {
  return input.split(',')
    .map(entry => entry.trim())
    .filter(entry => entry.length !== 0);
};

const onUserConsent = (consent) => {
  log('onUserConsent: ', consent);
  const consentModeStates = {
    ad_storage: consent.marketing ? 'granted' : 'denied',
    ad_user_data: consent.marketing ? 'granted' : 'denied',
    ad_personalization: consent.marketing ? 'granted' : 'denied',
    analytics_storage: consent.analytics ? 'granted' : 'denied',
    functionality_storage: consent.functional ? 'granted' : 'denied',
    personalization_storage: consent.functional ? 'granted' : 'denied',
    security_storage: 'granted'
  };
  log('consentModeStates: ', consentModeStates);
  updateConsentState(consentModeStates);
};

const main = (data) => {
  /*
   * Optional settings using gtagSet
   */
  gtagSet('developer_id.dM2I0MW', true);
  gtagSet('ads_data_redaction', data.ads_data_redaction);
  gtagSet('url_passthrough', data.url_passthrough);
  
  /* Set default consent state(s) */
  log('data = ', data);
  const defaults = data.defaultSettings || [];
  
  if(defaults.length > 0) {
    defaults.forEach(settings => {
      const defaultData = {
        'ad_storage': settings.adStorage,
        'analytics_storage': settings.analyticsStorage,
        'functionality_storage': settings.functionalityStorage,
        'personalization_storage': settings.personalizationStorage,
        'security_storage': settings.securityStorage,
        'ad_user_data': settings.adUserData,
        'ad_personalization': settings.adPersonalization,
        'wait_for_update': 500,
      };
      setDefaultConsentState(defaultData);
    });
  } else {
    setDefaultConsentState({
      'ad_storage': 'denied',
      'analytics_storage': 'denied',
      'functionality_storage': 'denied',
      'personalization_storage': 'denied',
      'security_storage': 'granted',
      'ad_user_data': 'denied',
      'ad_personalization': 'denied',
      'wait_for_update': 500,
     });
  }  

  let concordCookie;
  if (queryPermission('get_cookies', concordKey)) {
  concordCookie = getCookieValues(concordKey);
}
  
  log('concordCookie', concordCookie);
  
  let concordConsentSettings;
  if (concordCookie && concordCookie.length > 0) {
    log('Found Concord consent settings in Concord cookie.');
    concordConsentSettings = JSON.parse(concordCookie);
    log('parsed concordConsentSettings', concordConsentSettings);
  }

  log('concordConsentSettings:', concordConsentSettings);

  if (concordConsentSettings && Object.keys(concordConsentSettings).length > 0) {
    log('concordConsentSettings has length');
    onUserConsent(concordConsentSettings);
  }

  /* If the script is injected successfully, log a message and signal success */
  const onInjectSuccess = () => {
    log('Concord script injected successfully by GTM.');
    data.gtmOnSuccess();
  };

  /* If the script fails to inject successfully, log a message and signal failure */
  const onInjectFailure = () => {
    log('Concord GTM script injection failed.');
    data.gtmOnFailure();
  };
  
  if (injectConcordScript === true) {
    const url = 'https://' + concordDomain + '/site-v1/'+concordProjectId+'/site-client';
    injectScript(url, onInjectSuccess, onInjectFailure, 'concord');
  } else {
    data.gtmOnSuccess();
  }
};

main(data);


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://*.concord.tech/"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_consent",
        "versionId": "1"
      },
      "param": [
        {
          "key": "consentTypes",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ad_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "analytics_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "wait_for_update"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "functionality_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "personalization_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "security_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ad_user_data"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ad_personalization"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "write_data_layer",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keyPatterns",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "ads_data_redaction"
              },
              {
                "type": 1,
                "string": "url_passthrough"
              },
              {
                "type": 1,
                "string": "developer_id.dM2I0MW"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "get_cookies",
        "versionId": "1"
      },
      "param": [
        {
          "key": "cookieAccess",
          "value": {
            "type": 1,
            "string": "any"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 8/8/2024, 9:05:19 PM


